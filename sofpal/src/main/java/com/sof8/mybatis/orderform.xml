<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sof8.mapper.OrderFormMapper">

	<insert id="insertorder" parameterType="Order">
		INSERT into orderTBL VALUES (o_id, #{user_id}, 1, ${totalprice}, ${totaldiscount}, #{pay_option}, #{o_status}, NOW(), #{c_date}, #{re_name}, #{re_tel}, #{re_zipcode}, #{re_addr}, #{re_deaddr}, #{re_req})
			<selectKey keyProperty="o_id" resultType="Integer" order="AFTER"> 
                SELECT LAST_INSERT_ID()
      		</selectKey> 
	</insert>
	<insert id="insertdetailorder" parameterType="DetailOrder">
		INSERT into detail_order VALUES (de_id, ${o_id}, ${p_id}, ${d_cnt}, ${price})
	</insert>
	<insert id="insertreservation" parameterType="Reservation">
		INSERT into reservation VALUES (re_id, ${d_id}, ${o_id}, #{deliver_date})
	</insert>
</mapper>